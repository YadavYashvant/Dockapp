# Dockapp
This project provides a lightweight and easily reproducible environment for Android app development without needing Android Studio. Using Docker, you can set up an Android SDK environment that supports building, testing, and running Android apps.

## Project Structure
<pre>
android-docker-project/
├── android-app/             # Your Android app source code (optional or clone it later)
│   ├── app/
│   │   ├── src/
│   │   │   ├── main/
│   │   │   │   ├── AndroidManifest.xml
│   │   │   │   ├── java/
│   │   │   │   │   └── com/example/app/MainActivity.java or MainActivity.kt
│   │   │   │   └── res/   # Resources like layouts, images, etc.
│   │   ├── build.gradle    # Gradle build script for the app module
│   └── ...
├── docker/
│   ├── Dockerfile           # Dockerfile for Android build environment
│   ├── entrypoint.sh        # Optional entrypoint script for container initialization
│   └── gradle.properties    # Gradle configuration file
├── docker-compose.yml       # Optional docker-compose file for easy container management
├── README.md                # Project documentation and setup instructions
└── scripts/
    ├── build.sh             # Shell script to build the Android project
    ├── run-emulator.sh      # Shell script to run the Android emulator
    └── install-apk.sh       # Shell script to install APK on emulator or device
</pre>

## Setup

### 1. Clone the repository
First, clone the project repository:

```bash
git clone https://github.com/your-repo/android-docker-project.git
cd android-docker-project
```
2. Build the Docker image

Use Docker Compose to build the image defined in the Dockerfile.

```bash

docker-compose build
```
3. Run the container

After building, run the container using Docker Compose:

```bash

docker-compose up
```
4. Access the container

To access the container's shell, use the following command:

```bash

docker exec -it android-dev-container /bin/bash
```
5. Install Gradle (optional)

If you need to install Gradle inside the container, run the following commands inside the container:

```bash

wget https://services.gradle.org/distributions/gradle-7.5-bin.zip -P /tmp
unzip /tmp/gradle-7.5-bin.zip -d /opt
ln -s /opt/gradle-7.5 /opt/gradle

export GRADLE_HOME=/opt/gradle
export PATH=$GRADLE_HOME/bin:$PATH

# Verify Gradle installation
gradle -v
```
## Android Project

You can either clone an existing Android project into the android-app/ directory or create a new Android project from scratch.

To clone a sample Android project:

```bash

git clone https://github.com/sample-android-project/android-app.git android-app
```
## Build the Android App

To build the Android project inside the container, run the following script:

```bash

./scripts/build.sh
```
This will compile the Android app and generate the APK file. The APK will be located in the build/outputs/apk directory of your project.

```bash

APK built at: /workspace/android-app/build/outputs/apk/debug/app-debug.apk
```
## Running the Emulator

To run an Android emulator inside the Docker container, use the following script:

```bash

./scripts/run-emulator.sh
```
Make sure you have the AVD (Android Virtual Device) configured inside the container. If not, you can create one with:

```bash

avdmanager create avd -n test -k "system-images;android-30;google_apis;x86_64"
```
Then run the emulator with:

```bash

emulator -avd test
```
## Installing APK

To install the APK on a connected device or emulator, use the following script:

```bash

./scripts/install-apk.sh
```
This script uses adb to install the APK generated by the build process onto an emulator or a physical device connected to the system.
Cleaning Up

To stop and remove the container after use, you can run:

```bash

docker-compose down
```

## Troubleshooting

    If you encounter any permission issues, ensure that Docker has the appropriate access rights to the file system (especially on Linux).
    Make sure the Android SDK paths are correctly configured in the Dockerfile and that the SDK tools are properly installed.
    Ensure you have enough system resources (CPU, RAM) to run the emulator in the Docker container.

License

This project is licensed under the MIT License.
